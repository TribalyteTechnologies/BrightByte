<ion-header no-border class="main-header">
    <ion-row no-padding class="header-row">
        <ion-col no-padding align-self-center>
            <div class="text-main">{{ "review.title" | translate }}</div>
        </ion-col>
    </ion-row>
</ion-header>

<ion-content padding class="main-container">
    <filter-selection [projects]="projects" (filterEmit)="setFilter($event)" (projectEmit)="setProject($event)"></filter-selection>

    <ion-row no-padding>
        <ion-col padding class="text-details text-details--bold">
            Showing all your commits
        </ion-col>
        <ion-col col-6 padding class="text-details text-details--bold" *ngIf="currentCommit">
            Details
        </ion-col>
    </ion-row>
    <ion-row no-padding class="scroll-dimensions">
        <ion-col no-padding class="main-style scroll-y">
            <div class="scrollable-content">
                <div [ngClass]="commit === currentCommit ? 'card card__selected' : 'card'" *ngFor="let commit of filterArrayCommits; let i = index" (click)="shouldOpen(commit)">
                    <review-card [commit]="commit"></review-card>
                </div>
            </div>
        </ion-col>
        <ion-col col-6 *ngIf="currentCommit" class="scroll-y">
            <div class="scrollable-content">


                <ion-row padding class="main-style">
                    <ion-col>
                        <ion-row class="text-title"> {{ currentCommit.title }} </ion-row>
                        <ion-row align-items-center class="text-description">
                            <img class="ico " src="../../../../assets/imgs/project-icon.svg">{{ currentCommit.project }}
                            <img class="ico ico__margin" src="../../../../assets/imgs/user-icon.svg"> {{ currentCommitName }} ( {{ currentCommitEmail }} )
                        </ion-row>
                    </ion-col>
                </ion-row>
                <ion-row *ngIf="needReview" padding class="title-left text-details text-details--bold">
                    Set Review
                </ion-row>
                <ion-row padding class="main-style" *ngIf="needReview">
                    <ion-col>
                        <ion-row class="text-title">Set your review</ion-row>
                        <ion-row>
                            <ion-textarea placeholder="{{ 'commitReview.description' | translate }}" [(ngModel)]="textComment"></ion-textarea>
                        </ion-row>
                        <ion-row padding justify-content-center>
                            <button class="star-style" *ngFor="let number of [0,1,2,3,4]" (click)="setReputation(number)">
                            <ion-icon clas="icon-size" name="{{ star[number] }}"></ion-icon>
                        </button>
                        </ion-row>
                        <ion-row>
                            <button class="btn btn--full btn__blue" (click)="setReview(currentCommit.url, textComment, rate); textComment =''">
                            {{ "commitReview.review" | translate }}
                        </button>
                        </ion-row>
                    </ion-col>
                </ion-row>
                <ion-row padding *ngIf="userCommitComment[0]" class="text-details text-details--bold">
                    Your review
                </ion-row>
                <review-comment [review]="userCommitComment[0]" *ngIf="userCommitComment[0]"></review-comment>
                <ion-row padding *ngIf="commitComments.length > 0" class="text-details text-details--bold">
                    Other Reviews
                </ion-row>
                <ion-col no-padding *ngFor="let comment of commitComments; let j=index ">
                    <review-comment *ngFor="let comment of commitComments; let j=index " [review]="comment" (thumbsUp)="setThumbs(currentCommit.url,j, 1)" (thumbsDown)="setThumbs(currentCommit.url,j, 2)"></review-comment>
                    <ion-row padding></ion-row>
                </ion-col>
            </div>
        </ion-col>
    </ion-row>
</ion-content>